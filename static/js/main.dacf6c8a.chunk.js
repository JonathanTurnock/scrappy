(this.webpackJsonpscrappy=this.webpackJsonpscrappy||[]).push([[2],{1312:function(e,t,n){"use strict";n.r(t);var r=n(24),a=(n(731),n(3)),c=n.n(a),o=n(292),i=n.n(o),s=n(23),l=n(222),u=n(357),d=n(138),f=n(1394),j=n(223),b=n(1422),p=n(145),m=n(15),h=n.n(m),O=n(115),x=n(1405),v=n(1402),g=n(399);function y(){var e=Object(l.a)(["\n  display: flex;\n  flex: auto;\n  overflow: inherit;\n"]);return y=function(){return e},e}j.a.div(y());var k=n(1409),S=function(){return Object(r.jsx)(x.a,{style:{flex:"auto"},horizontalAlign:"center",verticalAlign:"center",children:Object(r.jsx)(k.a,{label:"Please wait..."})})},w=n(100),C=(n(1395),n(300)),D=n(1397),A=n(699),I=n(1383),N=n(210),E=n.n(N),L={isBlocking:!1,styles:{main:{maxWidth:450}}},M=function(e){var t=e.title,n=e.text,c=e.hidden,o=e.onSubmit,i=e.onDismiss,s=Object(a.useMemo)((function(){return{type:C.a.normal,title:t,closeButtonAriaLabel:"Close",subText:n}}),[n,t]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(D.a,{hidden:c,onDismiss:i,dialogContentProps:s,modalProps:L,children:Object(r.jsx)(A.a,{children:Object(r.jsx)(I.a,{onClick:function(){return o(!0)},text:"Ok"})})})})},T=function(e){var t=e.title,n=e.text;return E()((function(e){var a=e.show,c=e.onSubmit,o=e.onDismiss;return Object(r.jsx)(M,{title:t,text:n,hidden:!a,onSubmit:c,onDismiss:o})}))},P=n(700),R={isBlocking:!1,styles:{main:{maxWidth:450}}},F=function(e){var t=e.title,n=e.text,c=e.hidden,o=e.onSubmit,i=e.onDismiss,s=Object(a.useMemo)((function(){return{type:C.a.normal,title:t,closeButtonAriaLabel:"Close",subText:n}}),[n,t]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(D.a,{hidden:c,onDismiss:i,dialogContentProps:s,modalProps:R,children:Object(r.jsxs)(A.a,{children:[Object(r.jsx)(I.a,{onClick:function(){return o(!0)},text:"Ok"}),Object(r.jsx)(P.a,{onClick:i,text:"Cancel"})]})})})},z=function(e){var t=e.title,n=e.text;return E()((function(e){var a=e.show,c=e.onSubmit,o=e.onDismiss;return Object(r.jsx)(F,{title:t,text:n,hidden:!a,onSubmit:c,onDismiss:o})}))},W=n(281),B=function(e){var t=e.multiple,n=e.accept,c=e.onSubmit,o=e.onDismiss,i=Object(a.useState)(!0),l=Object(s.a)(i,2),u=l[0],d=l[1],f=Object(a.useState)(),j=Object(s.a)(f,2),b=j[0],p=j[1],m=Object(a.useRef)();Object(a.useEffect)((function(){u||b&&c(b)||o()}),[u,b]),Object(a.useEffect)((function(){var e=Object(W.debounce)((function(){d(!1)}),250);return window.addEventListener("focus",e),function(){window.removeEventListener("focus",e)}}),[]),Object(a.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.click()}),[]);var x=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.target).files&&p(null===n||void 0===n?void 0:n.files);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("input",{id:"file-input-dialog_input",ref:m,type:"file",style:{display:"none"},multiple:t,accept:n,onChange:x})})},V=function(e){var t=e.multiple,n=e.accept;return E()((function(e){var a=e.show,c=e.onSubmit,o=e.onDismiss;return Object(r.jsx)(B,{multiple:t,accept:n,hidden:!a,onSubmit:c,onDismiss:o})}))},_=n(1406),G=n(320),K={isBlocking:!1,styles:{main:{maxWidth:450}}},J=function(e){var t=e.title,n=e.label,c=e.placeholder,o=e.defaultValue,i=e.hidden,s=e.onSubmit,l=e.onDismiss,u=Object(a.useRef)(),d=Object(a.useMemo)((function(){return{type:C.a.normal,title:t,closeButtonAriaLabel:"Close"}}),[t]),f=function(){var e;(null===(e=u.current)||void 0===e?void 0:e.value)?s(u.current.value):s("")};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(D.a,{hidden:i,onDismiss:l,dialogContentProps:d,modalProps:K,children:[Object(r.jsx)(_.a,{componentRef:u,label:n,placeholder:c,defaultValue:o,onKeyPress:function(e){return e.key===G.Key.Enter&&f()}}),Object(r.jsxs)(A.a,{children:[Object(r.jsx)(I.a,{onClick:function(){return f()},text:"Ok"}),Object(r.jsx)(P.a,{onClick:l,text:"Cancel"})]})]})})},U=function(e){var t=e.title,n=e.label,a=e.placeholder,c=e.defaultValue;return E()((function(e){var o=e.show,i=e.onSubmit,s=e.onDismiss;return Object(r.jsx)(J,{title:t,label:n,placeholder:a,defaultValue:c,hidden:!o,onSubmit:i,onDismiss:s})}))},H=n(1398),Q=n(1426),Y=n(51),$=n(1392),q={fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontWeight:"regular"},X=Object(Y.s)({isInverted:!0,defaultFontStyle:q,palette:{themePrimary:"#d2d2d2",themeLighterAlt:"#d6d6d6",themeLighter:"#dbdbdb",themeLight:"#e0e0e0",themeTertiary:"#e5e5e5",themeSecondary:"#eaeaea",themeDarkAlt:"#efefef",themeDark:"#f4f4f4",themeDarker:"#f9f9f9",neutralLighterAlt:"#2d2d2d",neutralLighter:"#363636",neutralLight:"#434343",neutralQuaternaryAlt:"#4c4c4c",neutralQuaternary:"#535353",neutralTertiaryAlt:"#707070",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#242424"}}),Z=Object(Y.s)({isInverted:!1,defaultFontStyle:q,palette:{themePrimary:"#404040",themeLighterAlt:"#f7f7f7",themeLighter:"#e0e0e0",themeLight:"#c6c6c6",themeTertiary:"#8c8c8c",themeSecondary:"#575757",themeDarkAlt:"#393939",themeDark:"#303030",themeDarker:"#242424",neutralLighterAlt:"#f8f8f8",neutralLighter:"#f4f4f4",neutralLight:"#eaeaea",neutralQuaternaryAlt:"#dadada",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c8c8",neutralTertiary:"#595959",neutralSecondary:"#373737",neutralPrimaryAlt:"#2f2f2f",neutralPrimary:"#000000",neutralDark:"#151515",black:"#0b0b0b",white:"#ffffff"}});Object($.a)("static/media/");var ee={standard:"42px",compact:"38px",standardIcon:"26px",compactIcon:"22px"},te=function(e){var t=e.icon,n=e.name,a=e.onClick;return Object(r.jsx)(Q.a,{style:{minHeight:ee.standard},iconProps:{iconName:t},text:n,onClick:a})},ne=n(404),re=function(e){var t=e.children,n=e.horizontal,a=void 0===n||n,c=Object(ne.a)().palette;return Object(r.jsx)(x.a,{horizontal:a,tokens:{childrenGap:"0.5rem"},styles:{root:{padding:"0.5rem",borderBottom:"".concat(c.neutralLight," solid 1px")}},children:t})},ae=Object(a.createContext)({_database:null,_collections:{},collections:{},addSchemas:function(){return Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Context Not Initialized, ensure a valid Database is passed to the Provider");case 1:case"end":return e.stop()}}),e)})))()}}),ce=function(e){return Object(a.useContext)(ae).collections[e]},oe=n(0),ie=n(1),se=n(339),le=n(668),ue=n(433),de=n(698),fe=n(676);Object(se.a)(de.a),Object(se.a)(fe.a),Object(se.a)(le.a),Object(se.a)(ue.a);var je=function(){function e(t){Object(oe.a)(this,e),this._database=void 0,this._collections={},this._database=t}return Object(ie.a)(e,[{key:"collections",get:function(){return this._collections}}]),Object(ie.a)(e,[{key:"addSchemas",value:function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._database.addCollections(t);case 2:this._collections=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getDatabase",value:function(){var t=Object(O.a)(h.a.mark((function t(n,r){var a,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.inMemory,c=void 0!==a&&a,o=r.password,t.next=3,Object(se.b)({name:n,adapter:c?"memory":"idb",ignoreDuplicate:!0,password:o});case 3:return i=t.sent,t.abrupt("return",new e(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),be=n(1413),pe=n(1417),me=n(1425),he=function(e){var t=e.message,n=e.onReset,c=Object(ne.a)().palette,o=Object(a.useMemo)((function(){return t.includes("another instance on this adapter has a different password")?"Invalid Password":t}),[t]);return Object(r.jsxs)(x.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",style:{flex:"auto"},tokens:{childrenGap:"0.5rem"},children:[Object(r.jsx)(be.a,{iconName:"Warning",style:{color:c.red}}),Object(r.jsx)(pe.a,{variant:"mediumPlus",style:{textAlign:"center"},children:o}),Object(r.jsx)(me.a,{iconProps:{iconName:"Refresh"},onClick:function(){n()}})]})},Oe=n(677),xe=n.n(Oe),ve={isBlocking:!1,styles:{main:{maxWidth:450}}},ge=function(e){var t=e.title,n=e.label,c=e.requirements,o=void 0===c?{minLength:9,minLowercase:2,minUppercase:2,minNumbers:0,minSymbols:1}:c,i=e.hidden,l=e.onSubmit,u=Object(a.useState)(!0),d=Object(s.a)(u,2),f=d[0],j=d[1],b=Object(a.useRef)(),p=Object(a.useMemo)((function(){return{type:C.a.normal,title:t,closeButtonAriaLabel:"Close"}}),[t]),m=function(){var e;(null===(e=b.current)||void 0===e?void 0:e.value)?l(b.current.value):l("")};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(D.a,{hidden:i,onDismiss:void 0,dialogContentProps:p,modalProps:ve,children:[Object(r.jsx)(_.a,{type:"password",canRevealPassword:!0,componentRef:b,label:n,onKeyPress:function(e){return e.key===G.Key.Enter&&!f&&m()},onGetErrorMessage:function(e){if(xe()(e,o))j(!1);else if(j(!0),e.length>2)return"Weak Password!"}}),Object(r.jsx)(A.a,{children:Object(r.jsx)(I.a,{onClick:function(){return m()},text:"Ok",disabled:f})})]})})},ye=function(e){var t=e.title,n=e.label;return E()((function(e){var a=e.show,c=e.onSubmit,o=e.onDismiss;return Object(r.jsx)(ge,{title:t,label:n,hidden:!a,onSubmit:c,onDismiss:o})}))},ke=function(e){var t=e.databaseName,n=e.schemas,c=e.options,o=e.children,i=Object(a.useState)((new Date).getTime()),l=Object(s.a)(i,2),u=l[0],d=l[1],f=Object(a.useState)(),j=Object(s.a)(f,2),b=j[0],m=j[1],x=Object(a.useState)(),v=Object(s.a)(x,2),g=v[0],y=v[1];Object(a.useEffect)((function(){(function(){var e=Object(O.a)(h.a.mark((function e(){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye({title:"Master Password",label:"Password"});case 2:return r=e.sent,e.next=5,je.getDatabase(t,Object(p.a)(Object(p.a)({},c),{},{password:r}));case 5:return a=e.sent,e.next=8,a.addSchemas(n);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){m(e),y(null)})).catch((function(e){y(e)}))}),[t,c,n,u]);return b&&!g?Object(r.jsx)(ae.Provider,{value:b,children:o}):g?Object(r.jsx)(he,{message:g.message,onReset:function(){return d((new Date).getTime())}}):b||g?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(S,{})},Se=function(e){return{id:e.id,created:e.created,name:e.name,starred:e.starred,locked:e.locked,content:e.content,contentType:e.contentType,archived:e.archived,groupName:e.groupName,labels:e.labels}},we=function(){var e=ce("scraps"),t=function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(n);case 2:return t.next=4,e.bulkInsert(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.upsert(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.find({selector:{id:n.id}}).remove();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.find().where({id:{$in:n.map((function(e){return e.id}))}}).remove();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{save:n,bulkInsert:t,deleteOne:r,deleteMany:a}},Ce=n(1407),De=n(1386),Ae=n(1391),Ie=n(136),Ne=n(657),Ee=Object(Y.F)({fileIconHeaderIcon:{padding:0,fontSize:"16px"},fileIconCell:{textAlign:"center",selectors:{"&:before":{content:".",display:"inline-block",verticalAlign:"middle",height:"100%",width:"0px",visibility:"hidden"}}},fileIconImg:{verticalAlign:"middle",maxHeight:"16px",maxWidth:"16px"},controlWrapper:{display:"flex",flexWrap:"wrap"},exampleToggle:{display:"inline-block",marginBottom:"10px",marginRight:"30px"},selectionDetails:{marginBottom:"20px"}}),Le={markdown:"MarkDownLanguage",json:"FileCode",yaml:"FileYML"},Me=[{key:"icon",name:"Scrap Type",className:Ee.fileIconCell,iconClassName:Ee.fileIconHeaderIcon,iconName:"Page",isIconOnly:!0,fieldName:"contentType",minWidth:16,maxWidth:16,onRender:function(e){var t=e.contentType;return Object(r.jsx)(Ne.a,{iconName:Le[t],className:Ee.fileIconImg})}},{key:"name",name:"Name",minWidth:16,fieldName:"name"},{key:"labels",name:"Labels",minWidth:100,maxWidth:100,fieldName:"labels",onRender:function(e){return e.labels.join(", ")}},{key:"created",name:"Created",minWidth:120,maxWidth:120,fieldName:"created",onRender:function(e){var t=e.created;return Object(r.jsx)("span",{children:new Date(t).toLocaleString()})}}],Te=function(e){var t=e.scraps,n=e.onOpen,c=e.onSelectionChange,o=e.selectionEnabled,i=Object(a.useMemo)((function(){return new De.a({getKey:function(e){return e.id},onSelectionChanged:function(){c(i.getSelection())}})}),[]);return Object(r.jsx)(x.a,{style:{overflowY:"auto"},children:Object(r.jsx)(Ae.a,{selection:i,items:t,columns:Me,onItemInvoked:n,selectionMode:o?Ie.b.multiple:Ie.b.none,styles:{root:{userSelect:"none"}}})})},Pe=n(1419),Re=function(e){var t=e.onAdd,n=e.onRename,a=e.onDelete,c=e.onToggleSelection,o=e.onExport,i=e.onImport,s=e.onFilter,l=e.selectionCount;return Object(r.jsxs)(re,{children:[Object(r.jsxs)(x.a,{horizontal:!0,children:[Object(r.jsx)(te,{icon:"Add",name:"New Scrap",onClick:t}),1===l&&Object(r.jsx)(te,{icon:"Rename",name:"Rename Scrap",onClick:n}),l>0&&Object(r.jsx)(te,{icon:"Delete",name:l>1?"Delete Scraps":"Delete Scrap",onClick:a}),Object(r.jsx)(te,{icon:"MultiSelect",name:"Select",onClick:c}),Object(r.jsx)(te,{icon:"Upload",name:"Import",onClick:i}),l>0&&Object(r.jsx)(te,{icon:"Download",name:l>1?"Export All":"Export",onClick:o})]}),Object(r.jsx)(x.a,{style:{paddingRight:"0.5rem",flex:"auto"},horizontalAlign:"end",verticalAlign:"center",children:Object(r.jsx)(Pe.a,{placeholder:"Search",size:30,onSearch:s,onClear:function(){return s("")}})})]})},Fe=function(e){var t=e.onAdd,n=e.onRename,a=e.onDelete,c=e.onToggleSelection,o=e.onExport,i=e.onImport,s=e.onFilter,l=e.selectionCount;return Object(r.jsxs)(re,{horizontal:!1,children:[Object(r.jsx)(x.a,{style:{flex:"auto"},horizontalAlign:"stretch",verticalAlign:"center",children:Object(r.jsx)(Pe.a,{underlined:!0,placeholder:"Search",onSearch:s,onClear:function(){return s("")}})}),Object(r.jsxs)(x.a,{horizontal:!0,horizontalAlign:"center",tokens:{childrenGap:"0.5rem"},children:[Object(r.jsx)(te,{icon:"Add",name:"New",onClick:t}),1===l&&Object(r.jsx)(te,{icon:"Rename",name:"Rename",onClick:n}),l>0&&Object(r.jsx)(te,{icon:"Delete",name:l>1?"Delete All":"Delete",onClick:a}),Object(r.jsx)(te,{icon:"MultiSelect",name:"Select",onClick:c}),Object(r.jsx)(te,{icon:"Upload",name:"Import",onClick:i}),l>0&&Object(r.jsx)(te,{icon:"Download",name:l>1?"Export All":"Export",onClick:o})]})]})},ze=n(678),We=n.n(ze),Be=n(679),Ve=n(441),_e=Be.Aigle.eachSeries,Ge=function(){var e=function(){var e=ce("scraps"),t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){e.find({selector:{},sort:[{created:"asc"}]}).$.subscribe((function(e){c(e.map((function(e){return Se(e)})))}))}),[e]),r}(),t=we(),n=t.save,c=t.deleteMany,o=t.bulkInsert,i=Object(d.f)(),l=i.push,u=i.location,f=Object(a.useState)([]),j=Object(s.a)(f,2),m=j[0],y=j[1],k=Object(b.a)(!1),S=Object(s.a)(k,2),w=S[0],C=S[1].toggle,D=Object(a.useState)(),A=Object(s.a)(D,2),I=A[0],N=A[1],E=Object(a.useMemo)((function(){return e.filter((function(e){var t=e.name,n=e.labels;return!I||(!!t.includes(I)||!!n.includes(I))}))}),[e,I]),L=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({title:"Add Scrap",label:"Scrap Name"});case 2:if(!(t=e.sent)){e.next=6;break}return e.next=6,n({id:Object(Ce.a)().split("-")[0],name:t,created:(new Date).getTime(),content:"",locked:!1,starred:!1,contentType:"markdown",labels:[],groupName:"",archived:!1});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m[0],e.next=3,U({title:"Rename Scrap",label:"Scrap Name",defaultValue:t.name});case 3:if(!(r=e.sent)){e.next=7;break}return e.next=7,n(Object(p.a)(Object(p.a)({},t),{},{name:r}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>1?"Are you sure you want to delete ".concat(m.length," scraps?"):"Are you sure you want to delete ".concat(m[0].name,"?"),e.next=3,z({title:"Delete Scrap",text:t});case 3:if(!e.sent){e.next=7;break}return e.next=7,c(m);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("/scrap/".concat(t.id),u);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye({title:"Encrypt Export",label:"Password"});case 2:t=e.sent,n=Ve.AES.encrypt(JSON.stringify(m),t),We()(n,"scraps.enc","application/json");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({});case 2:return t=e.sent,e.next=5,_e(t,function(){var e=Object(O.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye({title:"Decrypt Export File ".concat(t.name),label:"Password"});case 2:return n=e.sent,e.t0=Ve.AES,e.next=6,t.text();case 6:e.t1=e.sent,e.t2=n,r=e.t0.decrypt.call(e.t0,e.t1,e.t2),o(JSON.parse(Ve.enc.Utf8.stringify(r))).then((function(e){var t=e.error;if(t.length>0){var n=t.map((function(e){var t=e.id,n=e.message;return"".concat(t,": ").concat(n)})).join("\n - ");T({title:"Import",text:"Errors Occurred:\n - ".concat(n)})}else T({title:"Import",text:"Successful Import"})})).catch((function(e){T({title:"Import",text:"Failed Import ".concat(e.message)})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(g.useMediaQuery)({minWidth:768})?Re:Fe;return Object(r.jsxs)(x.a,{style:{flex:"auto"},children:[Object(r.jsx)(B,{onAdd:L,onRename:M,onDelete:P,onToggleSelection:C,onExport:F,onImport:W,onFilter:function(e){e&&e.length>0?N(e):N(void 0)},selectionCount:m.length}),Object(r.jsxs)(x.a,{className:"container overflow-hidden",children:[Object(r.jsx)(v.a,{items:[{key:"scraps",text:"Scraps"}]}),Object(r.jsx)(Te,{scraps:E,onSelectionChange:y,onOpen:R,selectionEnabled:w})]})]})},Ke=n(1410),Je=n(691),Ue=function(e){var t=e.onSave;return Object(r.jsx)(re,{children:Object(r.jsx)(te,{icon:"Save",name:"Save",onClick:t})})},He=n(680),Qe=n.n(He),Ye=n(681),$e=n.n(Ye),qe=n(1403),Xe=n(1389),Ze=n(1390),et=function(e){var t=e.contentType,n=e.content,c=Object(ne.a)(),o=c.isInverted,i=c.palette,s=Object(a.useMemo)((function(){return{code:function(e){var t=e.language,n=e.value;return Object(r.jsx)(qe.a,{style:o?Xe.a:Ze.a,language:t,children:n})}}}),[o]),l=Object(a.useMemo)((function(){switch(t){case"json":default:return n}}),[t]);return Object(r.jsx)(x.a,{style:{flex:"auto"},className:"markdown-body",styles:{root:{color:"".concat(i.black," !important"),padding:"1rem"}},children:Object(r.jsx)(Qe.a,{renderers:s,plugins:[$e.a],children:l})})},tt=n(1420),nt=n(1415),rt=n(1399),at=n(1421),ct=n(363),ot=n.n(ct),it=n(1408),st=n(5),lt=n(6),ut=function(e){Object(st.a)(n,e);var t=Object(lt.a)(n);function n(e){var r;return Object(oe.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(ie.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(r.jsxs)(x.a,{verticalFill:!0,horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(pe.a,{variant:"xxLarge",children:"\ud83d\ude32"}),Object(r.jsx)(pe.a,{variant:"large",children:"Something went wrong, please ensure the content is valid."})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(c.a.Component),dt=n(686),ft=function(e){switch(e){case 1:return"xxLarge";case 2:return"xLarge";case 3:default:return"large"}},jt=function e(t){var n=t.title,a=t.object,c=t.depth;return Object(r.jsxs)(x.a,{style:{paddingTop:"0.5rem"},children:[Object(r.jsx)(pe.a,{variant:ft(c),children:Object(it.a)(n)}),Object(r.jsx)(tt.a,{}),Object(r.jsx)(x.a,{tokens:{childrenGap:"0.5rem"},children:Object(W.map)(a,(function(t,n){return a=n,o=t,Object(W.isObject)(o)?Object(r.jsx)(e,{title:a,object:o,depth:c+1},a):Object(r.jsx)(bt,{k:a,v:o},a);var a,o}))})]})},bt=function(e){var t,n=e.k,c=e.v;try{t=n&&Object(it.a)(n)}catch(i){t=""}var o=Object(a.useMemo)((function(){if(n.match(/(^pass|pass$)/))return"password"}),[n]);switch(typeof c){case"boolean":return Object(r.jsx)(at.a,{label:t,checked:c});default:return Object(r.jsx)(_.a,{readOnly:!0,canRevealPassword:!0,type:o,multiline:c.toString().includes("\n"),rows:Object(W.clamp)(c.toString().split("\n").length,0,10),value:c.toString(),onRenderLabel:function(){return Object(r.jsxs)(x.a,{horizontal:!0,tokens:{childrenGap:"0.5rem"},children:[Object(r.jsx)(nt.a,{children:t}),Object(r.jsx)(rt.a,{content:"Copy to Clipboard",directionalHint:w.a.bottomCenter,children:Object(r.jsx)(me.a,{iconProps:{iconName:"Copy"},onClick:function(){Object(dt.a)(c.toString())}})})]})}})}},pt=function(e){var t=e.contentType,n=e.content,c=Object(a.useMemo)((function(){try{switch(t){case"json":return JSON.parse(n);case"yaml":return ot.a.parse(n)}}catch(e){return console.log(e),{}}}),[t]);return Object(r.jsx)(x.a,{tokens:{childrenGap:"1rem",padding:"1rem"},children:Object(r.jsx)(ut,{children:Object(W.map)(c,(function(e,t){return n=t,a=e,Object(W.isObject)(a)?Object(r.jsx)(jt,{title:n,object:a,depth:1},n):Object(r.jsx)(bt,{k:n,v:a},n);var n,a}))})})},mt=n(694),ht=n(442),Ot=n(687),xt=n(688),vt=n.n(xt),gt=n(689),yt=n.n(gt),kt=n(690),St=n.n(kt),wt=function(e){var t=e.language,n=e.defaultValue,c=e.onLanguageChange,o=e.onChanges,i=e.editorRef,l=e.monacoRef,u=Object(a.useState)(),d=Object(s.a)(u,2),f=d[0],j=d[1],b=Object(a.useRef)(),p=Object(a.useRef)(),m=Object(ne.a)().isInverted;Object(a.useEffect)((function(){var e,n=null===(e=b.current)||void 0===e?void 0:e.addAction({id:"app-prettier-format",label:"Reformat with Prettier",contextMenuGroupId:"1_modification",contextMenuOrder:1,keybindings:[ht.KeyMod.CtrlCmd|ht.KeyMod.Shift|ht.KeyCode.KEY_F],run:function(e){e.setValue(Object(Ot.format)(e.getValue(),{parser:t,plugins:[vt.a,yt.a,St.a]}))}});return function(){null===n||void 0===n||n.dispose()}}),[t,b.current,f]);return Object(r.jsx)(mt.a,{theme:m?"vs-dark":"vs-light",options:{fontSize:14,wordWrap:"off",fontLigatures:!0,multiCursorModifier:"alt",lineNumbers:"off",minimap:{enabled:!1},scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:6,verticalSliderSize:6}},language:t,onMount:function(e,t){b.current=e,p.current=t,i&&(i.current=e),l&&(l.current=t),e.addAction({id:"app-yaml-2-json",label:"Convert: YAML > JSON",contextMenuGroupId:"1_modification",contextMenuOrder:2,run:function(e){e.setValue(JSON.stringify(ot.a.parse(e.getValue()),null,2)),c("json")}}),e.addAction({id:"app-json-2-yaml",label:"Convert: JSON > YAML",contextMenuGroupId:"1_modification",contextMenuOrder:3,run:function(e){e.setValue(ot.a.stringify(JSON.parse(e.getValue()))),c("yaml")}}),j((new Date).getTime())},defaultValue:n,onChange:function(e){o&&o(e||"")}})},Ct=[{key:"markdown",text:"Markdown"},{key:"json",text:"JSON"},{key:"yaml",text:"YAML"}],Dt=function(e){var t=e.language,n=e.onLanguageChange,a=e.content,c=e.onContentChange,o=Object(ne.a)().palette;return Object(r.jsxs)(x.a,{style:{flex:"auto"},styles:{root:{color:"".concat(o.black," !important")}},children:[Object(r.jsx)(wt,{language:t,onLanguageChange:function(e){return n(e)},defaultValue:a||"",onChanges:c}),Object(r.jsx)(x.a,{horizontal:!0,className:"p-2 justify-content-end",children:Object(r.jsx)(H.a,{options:Ct,selectedKey:t,onChange:function(e,t){return(null===t||void 0===t?void 0:t.key)&&n(t.key.toString())}})})]})},At=n(30),It=n(1393),Nt={suggestionsHeaderText:"Suggested labels"},Et=function(e){var t=e.onChange,n=e.labels,a=e.availableLabels,c=void 0===a?[]:a;return Object(r.jsxs)(x.a,{style:{padding:"0.5rem"},children:[Object(r.jsx)(nt.a,{children:"Labels"}),Object(r.jsx)(It.a,{selectedItems:null===n||void 0===n?void 0:n.map((function(e){return{key:e,name:e}})),pickerSuggestionsProps:Nt,onResolveSuggestions:function(e){var t=c.filter((function(t){return t.startsWith(e)})).map((function(e){return{key:e,name:e}}));return[].concat(Object(At.a)(t),[{key:e,name:e}])},onChange:function(e){t((null===e||void 0===e?void 0:e.map((function(e){return e.key.toString()})))||[])}})]})},Lt=function(e){var t=e.value,n=e.onChange;return Object(r.jsx)(_.a,{underlined:!0,onChange:function(e){var t=e.target;return n(t.value)},value:t,styles:{field:{fontSize:"24px"}}})};function Mt(){var e=Object(l.a)(['\n  display: flex;\n  flex-direction: column;\n  flex: auto;\n  overflow: hidden;\n\n  & > div[role="tabpanel"] {\n    display: flex;\n    flex: auto;\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n\n  & > div[role="tabpanel"] > .scrap-tab {\n    display: flex;\n    flex: auto;\n    flex-direction: column;\n    padding: 0.5rem;\n    overflow-x: hidden;\n  }\n']);return Mt=function(){return e},e}var Tt=Object(j.a)(Ke.a)(Mt()),Pt=function(){var e=Object(d.f)().push,t=function(e){var t=e.id,n=ce("scraps"),r=Object(a.useState)(),c=Object(s.a)(r,2),o=c[0],i=c[1],l=Object(a.useState)(),u=Object(s.a)(l,2),d=u[0],f=u[1];return Object(a.useEffect)((function(){if(!t)throw new Error("Scrap ID is not defined!!, failed to fetch data");n.findOne({selector:{id:t}}).$.subscribe((function(e){e?i(Se(e)):(f("Unable to fetch Scrap with id ".concat(t)),i(void 0))}))}),[n,t]),[o,{error:d}]}({id:Object(d.g)().id}),n=Object(s.a)(t,2),c=n[0],o=n[1].error,i=we().save,l=Object(a.useState)(null===c||void 0===c?void 0:c.name),u=Object(s.a)(l,2),f=u[0],j=u[1],b=Object(a.useState)(null===c||void 0===c?void 0:c.content),m=Object(s.a)(b,2),g=m[0],y=m[1],k=Object(a.useState)(null===c||void 0===c?void 0:c.contentType),S=Object(s.a)(k,2),w=S[0],C=S[1],D=Object(a.useState)((null===c||void 0===c?void 0:c.labels)||[]),A=Object(s.a)(D,2),I=A[0],N=A[1];Object(a.useEffect)((function(){c&&(j(c.name),y(c.content),C(c.contentType),N(c.labels))}),[c]),Object(a.useEffect)((function(){o&&T({title:"Failed to get Scrap",text:o}).then((function(){return e("/")}))}),[c,o]);var E=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&f&&w?i(Object(p.a)(Object(p.a)({},c),{},{name:f,content:g||"",contentType:w,labels:I})).catch((function(e){T({title:"Failed to Save",text:e.message})})):T({title:"Failed to Save",text:"No Content Type Defined"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(x.a,{style:{flex:"auto",overflow:"hidden"},children:c&&w&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ue,{onSave:E}),Object(r.jsxs)(x.a,{style:{overflow:"hidden"},className:"container flex-fill",children:[Object(r.jsx)(v.a,{items:[{key:"scraps",text:"Scraps",onClick:function(){return e("/scraps")}},{key:"scrap",text:c.name}]}),Object(r.jsxs)(x.a,{style:{paddingTop:"1rem"},tokens:{childrenGap:"0.5rem"},children:[Object(r.jsx)(Lt,{value:f||"",onChange:j}),Object(r.jsx)(Et,{onChange:N,labels:I})]}),Object(r.jsxs)(Tt,{children:[Object(r.jsx)(Je.a,{className:"scrap-tab",headerText:"View",itemIcon:"TextDocument",children:"markdown"===w&&Object(r.jsx)(et,{contentType:w,content:g||""})||Object(r.jsx)(pt,{contentType:w,content:g||""})}),Object(r.jsx)(Je.a,{className:"scrap-tab",headerText:"Edit",itemIcon:"FileCode",children:Object(r.jsx)(Dt,{language:w,onLanguageChange:C,content:g,onContentChange:y})})]})]})]})})},Rt=n(1416),Ft=n(157),zt=n(1411),Wt=n(692),Bt=n.p+"static/media/brand-logo.7789894b.png";function Vt(){var e=Object(l.a)(['\n  font-family: "Rock Salt", sans-serif;\n  user-select: none;\n  padding-left: 1rem;\n  font-size: 16px;\n']);return Vt=function(){return e},e}function _t(){var e=Object(l.a)(["\n  display: flex;\n  padding: 0.25rem 0.25rem 0.25rem 1rem;\n  align-items: center;\n"]);return _t=function(){return e},e}function Gt(){var e=Object(l.a)(["\n  height: 32px;\n  width: 32px;\n  filter: drop-shadow(0px 0px 2px rgba(0, 0, 0, 0.2));\n"]);return Gt=function(){return e},e}var Kt=j.a.img(Gt()),Jt=Object(j.a)(x.a)(_t()),Ut=Object(j.a)(pe.a)(Vt()),Ht=function(e){return Object(Wt.a)(e),Object(r.jsxs)(Jt,{horizontal:!0,children:[Object(r.jsx)(Kt,{src:Bt,alt:"brand-logo"}),Object(r.jsx)(Ut,{children:"Scrappy"})]})},Qt=function(e){var t=e.isOpen,n=e.onDismiss,c=Object(d.f)().push,o=Object(a.useMemo)((function(){return[{links:[{key:"scraps",name:"Scraps",icon:"TextDocument",onClick:function(){return c("/")}}]}]}),[]);return Object(r.jsx)(Rt.a,{onRenderHeader:function(){return Object(r.jsx)(Ht,{})},isOpen:t,onDismiss:n,type:Ft.a.smallFixedNear,closeButtonAriaLabel:"Close",isLightDismiss:!0,styles:{commands:{marginTop:"0.5rem",marginBottom:"0.5rem"},navigation:{justifyContent:"space-between",alignItems:"center"},content:{padding:0}},children:Object(r.jsx)(zt.a,{groups:o,selectedKey:"scraps"})})},Yt=n(695),$t=n(431),qt=Object($t.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),Xt=qt.actions,Zt=(Xt.increment,Xt.decrement,Xt.incrementByAmount,qt.reducer),en=Object($t.a)({reducer:{counter:Zt}});function tn(){var e=Object(l.a)(["\n  display: flex;\n  flex: auto;\n  overflow: inherit;\n"]);return tn=function(){return e},e}function nn(){var e=Object(l.a)(["\n  flex: auto;\n  display: flex;\n  overflow: hidden;\n"]);return nn=function(){return e},e}var rn={scraps:{schema:{title:"Scrappy Scrap Schema",version:0,description:"Scrap of information",type:"object",properties:{id:{type:"string",primary:!0},created:{type:"number"},groupName:{type:"string"},name:{type:"string",default:"Unnamed Scrap..."},labels:{type:"array",uniqueItems:!0,items:{type:"string"}},contentType:{type:"string",default:"markdown"},content:{type:"string",default:"New Scrap..."},starred:{type:"boolean",default:!1},locked:{type:"boolean",default:!1},archived:{type:"boolean",default:!1}},required:["id","created","name"],indexes:["id","created","name"],encrypted:["name","content"],attachments:{encrypted:!0}}}},an={inMemory:!1,password:void 0},cn=j.a.div(nn()),on=j.a.main(tn()),sn=function(){var e=Object(b.a)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=c.setTrue,i=c.setFalse,l=Object(g.useMediaQuery)({query:"(prefers-color-scheme: dark)"}),j=Object(a.useState)(l?X:Z),p=Object(s.a)(j,2),m=p[0],h=p[1];return Object(a.useEffect)((function(){l?(h(X),Object(Y.E)(X)):(h(Z),Object(Y.E)(Z))}),[l]),Object(r.jsx)(f.a,{theme:m,style:{display:"flex",flex:"auto"},children:Object(r.jsxs)(Yt.a,{store:en,children:[Object(r.jsx)(u.a,{children:Object(r.jsxs)(cn,{children:[Object(r.jsx)(Qt,{isOpen:n,onDismiss:i}),Object(r.jsx)(on,{children:Object(r.jsx)(ke,{databaseName:"scrappydb",schemas:rn,options:an,children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/scrap/:id",component:Pt}),Object(r.jsx)(d.a,{path:"/",component:Ge})]})})})]})}),Object(r.jsx)(me.a,{onClick:o,iconProps:{iconName:"CollapseMenu"},style:{position:"fixed",bottom:"2rem",left:"2rem"}})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(sn,{}),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},664:function(e,t){},731:function(e,t,n){},768:function(e,t){},781:function(e,t){},787:function(e,t){},873:function(e,t){},875:function(e,t){},888:function(e,t){},890:function(e,t){},897:function(e,t){},900:function(e,t){},902:function(e,t){}},[[1312,3,4]]]);
//# sourceMappingURL=main.dacf6c8a.chunk.js.map